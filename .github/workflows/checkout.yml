# repository_dispatch api triggered workflow
# event_type "Triggered Workflow"
# to do 
# steps
# checkout csms seed branch of interest
# regenrate the labels
# push if the labels if changed

name: generate script

on:
    push:
        branches:
              - main

jobs:
    generate:
     name: generate seed
     runs-on: ubuntu-latest

     steps:
        - name: cdgc-ui-common
          uses: actions/checkout@v3
          with:
            path: main

        - name: checkout repo
          uses: actions/checkout@v3
          with:
            repository: poornendushukla/realTimeTable
            token: ${{secrets.GITHUB_TOKEN}}    
            path: otherRepo

        - name: setup node
          uses: actions/setup-node@v3
          with:
            node-version: 14


        - name: Installing packages in ui-common 
          run: |
            echo "installing packages"
            echo 'some ${GITHUB_PATH}'
            echo "dev_user_name=$GTIHUB_PATH" >> "$GITHUB_ENV"
            cd main
            npm ci
            echo ${{env.dev_user_name}}
            npm run generate -- --source '$DIR'

        # - name: capture actor
        #   run: |
        #     echo "dev_user_name=${{ github.actor }}" >> "$GITHUB_ENV"
        #     node -e "console.log('dev_user_email=', '${{ github.actor }}'.split('_')[0] + '@informatica.com')" >> "$GITHUB_ENV"\
          
        # - name: push generated controllers
        #   run: |
        #     git pull origin
        #     git status
        #     git add --all
        #     git commit -a -m "auto generated controllers" || echo ""
        #     git push
        #   env:
        #     GIT_AUTHOR_NAME: ${{ env.dev_user_name }}
        #     GIT_AUTHOR_EMAIL: ${{ env.dev_user_email }}
        #     GIT_COMMITTER_NAME: ${{ env.dev_user_name }}
        #     GIT_COMMITTER_EMAIL: ${{ env.dev_user_email }}
         



        


